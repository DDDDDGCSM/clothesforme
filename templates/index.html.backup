<!DOCTYPE html>
<html lang="es-MX">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookForMX - Intercambio de Libros</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #F5E6D3;
            color: #3E2723;
            line-height: 1.6;
            padding-bottom: 80px; /* ‰∏∫Â∫ïÈÉ®ÊåâÈíÆÁïôÁ©∫Èó¥ */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
        }

        /* Â§¥ÈÉ® */
        .header {
            text-align: center;
            padding: 20px 15px;
            background: white;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 28px;
            color: #2C5F2D;
            margin-bottom: 5px;
        }

        .header p {
            color: #6D4C41;
            font-size: 14px;
        }

        /* Âõæ‰π¶Âç°Áâá */
        .book-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .book-header {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .book-cover {
            width: 100px;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }

        .book-info {
            flex: 1;
        }

        .book-title {
            font-size: 18px;
            font-weight: 600;
            color: #2C5F2D;
            margin-bottom: 5px;
        }

        .book-author {
            color: #6D4C41;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-name {
            font-size: 13px;
            font-weight: 600;
        }

        .trust-badge {
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 10px;
            background: #E8D5B7;
        }

        .why-release {
            background: #FAF5ED;
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #2C5F2D;
            margin-top: 15px;
        }

        .why-release h4 {
            font-size: 13px;
            color: #2C5F2D;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .why-release p {
            font-size: 14px;
            line-height: 1.7;
            color: #3E2723;
        }

        /* ÂØºËà™ÁÆ≠Â§¥ */
        .nav-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .nav-arrow {
            background: #2C5F2D;
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-arrow:hover:not(:disabled) {
            background: #4A7C59;
            transform: scale(1.1);
        }

        .nav-arrow:disabled {
            background: #95A5A6;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .book-counter {
            font-size: 14px;
            color: #6D4C41;
            font-weight: 600;
        }

        /* Â∫ïÈÉ®Âõ∫ÂÆöÊåâÈíÆ */
        .fixed-bottom-btn {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .request-btn {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            background: #2C5F2D;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: block;
        }

        .request-btn:hover {
            background: #4A7C59;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(44, 95, 45, 0.3);
        }

        /* Ê®°ÊÄÅÊ°Ü */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            padding: 30px 20px;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #6D4C41;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: #F5E6D3;
        }

        .modal-title {
            font-size: 22px;
            color: #2C5F2D;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #3E2723;
            font-size: 14px;
        }

        .form-group textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 2px solid #E8D5B7;
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
        }

        .form-group textarea:focus {
            outline: none;
            border-color: #2C5F2D;
        }

        .book-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .book-option {
            border: 2px solid #E8D5B7;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .book-option:hover {
            border-color: #2C5F2D;
            transform: translateY(-2px);
        }

        .book-option.selected {
            border-color: #2C5F2D;
            background: #FAF5ED;
        }

        .book-option img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 8px;
        }

        .book-option p {
            font-size: 11px;
            margin-top: 5px;
            line-height: 1.3;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: #2C5F2D;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .submit-btn:hover {
            background: #4A7C59;
            transform: translateY(-2px);
        }

        .submit-btn:disabled {
            background: #95A5A6;
            cursor: not-allowed;
        }

        .success-message {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: #E8F5E9;
            border-radius: 8px;
            color: #2C5F2D;
            text-align: center;
            font-size: 14px;
        }

        /* ÂéÜÂè≤‰∫§Êç¢Âå∫ */
        .history-section {
            margin-top: 30px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .history-section h2 {
            font-size: 20px;
            color: #2C5F2D;
            margin-bottom: 15px;
            text-align: center;
        }

        .exchange-list {
            display: grid;
            gap: 15px;
        }

        .exchange-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: #FAF5ED;
            border-radius: 10px;
        }

        .exchange-book {
            text-align: center;
            flex: 1;
        }

        .exchange-book img {
            width: 60px;
            height: 90px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 5px;
        }

        .exchange-book p {
            font-size: 11px;
            font-weight: 600;
            line-height: 1.2;
        }

        .exchange-icon {
            font-size: 20px;
        }

        .exchange-date {
            font-size: 11px;
            color: #6D4C41;
            text-align: center;
            margin-top: 8px;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 24px;
            }

            .book-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .book-cover {
                width: 120px;
                height: 180px;
            }

            .book-selector {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 10px;
                padding: 20px 15px;
            }

            .exchange-item {
                flex-direction: column;
            }

            .exchange-icon {
                transform: rotate(90deg);
            }
        }

        /* Á©∫Áä∂ÊÄÅ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6D4C41;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Â§¥ÈÉ® -->
        <div class="header">
            <h1>üìö BookForMX</h1>
            <p>Intercambia libros, comparte historias</p>
        </div>

        <!-- ÂØºËà™ÊéßÂà∂ -->
        <div class="nav-controls">
            <button class="nav-arrow" onclick="prevBook()" id="prevBtn">‚Äπ</button>
            <div class="book-counter">
                <span id="currentIndex">1</span> / <span id="totalBooks">20</span>
            </div>
            <button class="nav-arrow" onclick="nextBook()" id="nextBtn">‚Ä∫</button>
        </div>

        <!-- Âõæ‰π¶Â±ïÁ§∫ -->
        <div id="bookDisplay">
            <!-- Âõæ‰π¶Âç°ÁâáÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÂä†ËΩΩ -->
        </div>

        <!-- ÂéÜÂè≤‰∫§Êç¢Âå∫ -->
        <div class="history-section">
            <h2>ü§ù Intercambios Realizados</h2>
            <div class="exchange-list" id="exchangeList">
                <!-- ‰∫§Êç¢ËÆ∞ÂΩïÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÂä†ËΩΩ -->
            </div>
        </div>
    </div>

    <!-- Â∫ïÈÉ®Âõ∫ÂÆöÊåâÈíÆ -->
    <div class="fixed-bottom-btn">
        <button class="request-btn" onclick="openModal()">
            üìñ Solicitar Intercambio
        </button>
    </div>

    <!-- Áî≥ËØ∑‰∫§Êç¢Ê®°ÊÄÅÊ°Ü -->
    <div class="modal" id="exchangeModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <h2 class="modal-title">Solicitar Intercambio</h2>
            
            <div class="form-group">
                <label>¬øPor qu√© este libro te llama? Cu√©ntale tu historia:</label>
                <textarea id="userStory" placeholder="Escribe aqu√≠ por qu√© quieres este libro y qu√© libro quieres intercambiar..."></textarea>
            </div>

            <div class="form-group">
                <label>Elige tu libro para intercambiar:</label>
                <div class="book-selector" id="bookSelector">
                    <!-- Âõæ‰π¶ÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÂä†ËΩΩ -->
                </div>
            </div>

            <button class="submit-btn" onclick="submitExchange()" id="submitBtn">
                ü§ù Enviar Solicitud
            </button>

            <div class="success-message" id="successMessage">
                ‚úÖ ¬°Solicitud enviada! Te notificaremos cuando el usuario responda.
            </div>
        </div>
    </div>

    <script>
        // Âõæ‰π¶Êï∞ÊçÆÔºà20Êú¨ÁúüÂÆûÂõæ‰π¶Ôºâ
        const books = [
            {
                id: 1,
                title: 'Cien a√±os de soledad',
                author: 'Gabriel Garc√≠a M√°rquez',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg',
                why_release: 'Mi abuela falleci√≥ durante esa lluvia interminable, y finalmente abr√≠ este libro que hab√≠a comprado a√±os atr√°s. Cuando le√≠ sobre √örsula viendo el destino de la familia en su ceguera, estaba sentado en el √°tico de mi casa escuchando la lluvia, y de repente entend√≠ qu√© significa "la memoria no es para olvidar, sino para volverse m√°s fuerte en el silencio". Cada p√°gina de este libro es h√∫meda y pesada como esa temporada de lluvias.',
                user: { name: 'Mar√≠a Gonz√°lez', avatar: 'https://i.pravatar.cc/150?img=1', trust_badge: 'ü¶â Compa√±ero Confiable' }
            },
            {
                id: 2,
                title: 'Pedro P√°ramo',
                author: 'Juan Rulfo',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg',
                why_release: 'Lo termin√© en un autob√∫s nocturno hacia Guanajuato, completamente solo. Fuera hab√≠a sombras de monta√±as negras, dentro estaban las almas errantes de Comala. Cuando le√≠ "la tierra est√° caliente, como sangre fresca", el autob√∫s pas√≥ junto a un letrero desolado. En ese momento, la l√≠nea entre ficci√≥n y realidad se desdibuj√≥, y sent√≠ que tambi√©n estaba en ese pueblo sin eco, buscando a un padre que tal vez ya no exist√≠a.',
                user: { name: 'Carlos Ram√≠rez', avatar: 'https://i.pravatar.cc/150?img=12', trust_badge: 'üìñ Bibli√≥filo Truequero' }
            },
            {
                id: 3,
                title: 'Ni√±a bonita',
                author: 'Carolina de Robertis',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg',
                why_release: 'Lo le√≠ escondido debajo del mostrador en una tiendita donde siempre sonaba una radio ruidosa. La rabia de la protagonista era como fuego, quemando mi entumecimiento d√≠a tras d√≠a. Al cerrar el libro, mir√© mi reflejo en la puerta de vidrio y por primera vez sent√≠ que tal vez tambi√©n ten√≠a derecho a romper algo, en lugar de mantener siempre la sonrisa. La portada de ese libro todav√≠a tiene manchas de caf√© y un poco de coraje rebelde.',
                user: { name: 'Ana Mart√≠nez', avatar: 'https://i.pravatar.cc/150?img=5', trust_badge: 'üåµ Lector Novato' }
            },
            {
                id: 4,
                title: 'Del amor y otros demonios',
                author: 'Gabriel Garc√≠a M√°rquez',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg',
                why_release: 'Este libro lo dej√≥ mi primera novia en nuestra "biblioteca compartida". A√±os despu√©s de separarnos, lo termin√© en una noche de insomnio. Cuando le√≠ sobre la joven de cabello largo encerrada en una jaula, muriendo por el malentendido y el miedo de la gente al amor, de repente entend√≠ cu√°l era el demonio no dicho entre nosotros. No es una historia, es un espejo tard√≠o y desgarrador.',
                user: { name: 'Sof√≠a Herrera', avatar: 'https://i.pravatar.cc/150?img=9', trust_badge: 'ü¶â Compa√±ero Confiable' }
            },
            {
                id: 5,
                title: 'Los detectives salvajes',
                author: 'Roberto Bola√±o',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg',
                why_release: 'A los veintis√©is a√±os, sinti√©ndome capaz de todo y de nada, segu√≠ este libro vagando por el desierto literario. Escrib√≠ en los m√°rgenes de las p√°ginas fantas√≠as y planes inmaduros, como si tambi√©n fuera uno de esos j√≥venes buscando al poeta desaparecido. Ahora al releerlo, esas palabras me dan verg√ºenza y nostalgia: nostalgia de ese yo torpe que realmente cre√≠a que la poes√≠a pod√≠a cambiar el mundo.',
                user: { name: 'Luis Fern√°ndez', avatar: 'https://i.pravatar.cc/150?img=15', trust_badge: 'üìñ Bibli√≥filo Truequero' }
            },
            {
                id: 6,
                title: 'Los ingr√°vidos',
                author: 'Valeria Luiselli',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg',
                why_release: 'Compr√© este libro cuando mi insomnio era m√°s severo. Sus frases est√°n fragmentadas, sus pensamientos son err√°ticos, pero encajan perfectamente con mi atenci√≥n que no pod√≠a enfocarse. No cuenta una historia, sino que simula un estado de conciencia "sin peso". Al leerlo, por primera vez sent√≠ que la confusi√≥n tambi√©n pod√≠a escribirse con tanta precisi√≥n y elegancia.',
                user: { name: 'Patricia L√≥pez', avatar: 'https://i.pravatar.cc/150?img=20', trust_badge: 'üåµ Lector Novato' }
            },
            {
                id: 7,
                title: 'El principito',
                author: 'Antoine de Saint-Exup√©ry',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg',
                why_release: 'La primera "versi√≥n" de mi vida fue cuando mi pap√° me lo ley√≥, entonces solo pensaba que la rosa era molesta. Despu√©s, se lo le√≠ a √©l en su cama de hospital, y cuando le√≠ "lo esencial es invisible a los ojos", me apret√≥ la mano. Ahora el libro sigue aqu√≠, pero √©l ya no. Cada vez que lo abro, veo simult√°neamente las estrellas de la infancia y la luz tenue de la habitaci√≥n del hospital.',
                user: { name: 'Diego S√°nchez', avatar: 'https://i.pravatar.cc/150?img=33', trust_badge: 'ü¶â Compa√±ero Confiable' }
            },
            {
                id: 8,
                title: 'Ficciones',
                author: 'Jorge Luis Borges',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg',
                why_release: 'Fue mi lectura de introducci√≥n en la clase de filosof√≠a de la universidad, y tambi√©n mi primer "mareo" intelectual. Entre los estantes viejos de la biblioteca, intent√© seguirlo hacia las ruinas circulares, la biblioteca de Babel... pero siempre terminaba dando vueltas. Esa sensaci√≥n de fracaso y atracci√≥n era igualmente fuerte. No me ense√±√≥ respuestas, sino a mantener una humildad y curiosidad eternas hacia el "infinito" y lo "posible".',
                user: { name: 'Elena Torres', avatar: 'https://i.pravatar.cc/150?img=47', trust_badge: 'üìñ Bibli√≥filo Truequero' }
            },
            {
                id: 9,
                title: 'Organ√≠zate con eficacia',
                author: 'David Allen',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg',
                why_release: 'La portada est√° nueva, pero las p√°ginas est√°n llenas de rastros de ansiedad: fue el √∫ltimo a√±o de mi maestr√≠a, marqu√© con resaltador todas las "prioridades", llen√© de etiquetas de colores. Fue testigo de mi intento de controlarlo todo y mi eventual colapso. Ahora al verlo, es m√°s como un esp√©cimen de "arqueolog√≠a de la ansiedad", registrando a ese joven apresurado perseguido por los deadlines.',
                user: { name: 'Roberto M√©ndez', avatar: 'https://i.pravatar.cc/150?img=52', trust_badge: 'üåµ Lector Novato' }
            },
            {
                id: 10,
                title: 'Los hijos de S√°nchez',
                author: 'Oscar Lewis',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg',
                why_release: 'Al leer este libro, no pod√≠a evitar compararlo con las conversaciones en la mesa de mi familia. Esas descripciones acad√©micas sobre pobreza, dignidad y destino se convirtieron de repente en las quejas de mi t√≠o, los suspiros de mi t√≠a y la espalda silenciosa de mi abuela. Fue la primera vez que sal√≠ del filtro del cari√±o familiar y us√© una claridad dolorosa para entender el mundo del que vengo.',
                user: { name: 'Carmen Ruiz', avatar: 'https://i.pravatar.cc/150?img=68', trust_badge: 'ü¶â Compa√±ero Confiable' }
            },
            {
                id: 11,
                title: 'Aura',
                author: 'Carlos Fuentes',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg',
                why_release: 'Empec√© a leerlo en una casa de hu√©spedes convertida de una mansi√≥n colonial supuestamente embrujada, para darme valor. Bajo la luz amarillenta, la humedad de la casa en el libro, la obsesi√≥n del joven historiador, lo extra√±o de la anciana, se mezclaron completamente con el crujido del piso de madera y el viento fuera de la ventana. Esa noche no estaba leyendo una historia g√≥tica, estaba viviendo en ella. Hasta el amanecer, las sombras se dispersaron.',
                user: { name: 'Fernando Morales', avatar: 'https://i.pravatar.cc/150?img=70', trust_badge: 'üìñ Bibli√≥filo Truequero' }
            },
            {
                id: 12,
                title: 'Como agua para chocolate',
                author: 'Laura Esquivel',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg',
                why_release: 'Mi mam√° no habla mucho, su amor est√° en la cocina. Este libro me hizo "entender" su magia por primera vez. Intent√© hacer "nogada" seg√∫n la receta del libro, fue un desastre, pero ella se ri√≥, tom√≥ las riendas y lo termin√≥ en silencio. En ese momento entend√≠ que algunas f√≥rmulas emocionales no se pueden copiar, fluyen en la sangre, como el agua para el chocolate, natural y necesaria.',
                user: { name: 'Isabel Guti√©rrez', avatar: 'https://i.pravatar.cc/150?img=25', trust_badge: 'ü¶â Compa√±ero Confiable' }
            },
            {
                id: 13,
                title: 'H√°bitos at√≥micos',
                author: 'James Clear',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg',
                why_release: 'Una vez cre√≠ devotamente que podr√≠a construir un yo perfecto. Levantarme temprano, marcar, rastrear cada peque√±o progreso... hasta que me di cuenta de que era como una m√°quina programada, eficiente pero sin calidez. Este libro ahora descansa silenciosamente en la esquina de mi estante, es un amor apasionado y ciego que tuve por la fe de la "autodisciplina", finalmente nos separamos en paz.',
                user: { name: 'Javier Castro', avatar: 'https://i.pravatar.cc/150?img=38', trust_badge: 'üåµ Lector Novato' }
            },
            {
                id: 14,
                title: 'La herencia',
                author: 'Rosa Beltr√°n',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg',
                why_release: 'Leerlo fue como jugar un juego de rompecabezas psicol√≥gico ingenioso. Cada miembro de la familia cuenta una "verdad" que encaja perfectamente, pero juntas forman una imagen completamente distorsionada. Me record√≥ a cada reuni√≥n familiar, cuando mis hermanos y yo relatamos el mismo evento de manera completamente diferente. La llamada memoria familiar tal vez nunca fue historia, sino mitos contempor√°neos que cada uno teje para sobrevivir.',
                user: { name: 'Luc√≠a Vargas', avatar: 'https://i.pravatar.cc/150?img=45', trust_badge: 'üìñ Bibli√≥filo Truequero' }
            },
            {
                id: 15,
                title: 'Pedro y el capit√°n',
                author: 'Mario Benedetti',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg',
                why_release: 'Este delgado guion lo termin√© en un intervalo de una protesta. Los gritos en la plaza y los di√°logos de interrogatorio en el libro formaron una disonancia estridente. No da respuestas simples de bien y mal, sino que arroja fr√≠amente la pregunta de "c√≥mo se deforma la humanidad bajo presi√≥n extrema". Al cerrar el libro y mirar a la multitud, una pregunta no desaparec√≠a: ¬ømi posici√≥n puede resistir cu√°nta presi√≥n real?',
                user: { name: 'Miguel √Ångel', avatar: 'https://i.pravatar.cc/150?img=55', trust_badge: 'ü¶â Compa√±ero Confiable' }
            },
            {
                id: 16,
                title: 'La reina del sur',
                author: 'Arturo P√©rez-Reverte',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg',
                why_release: '¬°Lectura pura de evasi√≥n! Despu√©s de un per√≠odo de trabajo agotador, lo llev√© a Canc√∫n. Playa, palmeras y la √©pica vida de una mujer en fuga. Fue como una dosis fuerte de adrenalina literaria, me hizo olvidar temporalmente todas las preocupaciones reales. Entre las p√°ginas parece que todav√≠a hay brisa marina y olor a protector solar barato, es un recuerdo de vacaciones que no necesitaba pensar, solo sentir velocidad y peligro.',
                user: { name: 'Natalia Jim√©nez', avatar: 'https://i.pravatar.cc/150?img=60', trust_badge: 'üåµ Lector Novato' }
            },
            {
                id: 17,
                title: 'El ojo en el cielo',
                author: 'Carlos Cuauht√©moc',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg',
                why_release: 'Este libro fue mi "contrabando" de adolescencia, escondido debajo del libro de matem√°ticas, le√≠do a escondidas en clases aburridas. Ese dulzor del primer amor, amargura y profundidad autoproclamada me hizo identificarme completamente. Ahora al releerlo, solo siento que la escritura es inmadura y la trama simple, pero esa palpitaci√≥n ardiente y pura de los quince a√±os ya no se puede reproducir. Es el f√≥sil de mi iniciaci√≥n emocional.',
                user: { name: '√ìscar P√©rez', avatar: 'https://i.pravatar.cc/150?img=65', trust_badge: 'ü¶â Compa√±ero Confiable' }
            },
            {
                id: 18,
                title: 'Paseo con Octavio Paz',
                author: 'Elena Poniatowska',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg',
                why_release: 'Necesita un coraz√≥n completamente tranquilo para entrar, y mi vida reciente est√° llena de ruido: el llanto del ni√±o, las notificaciones del trabajo, las tareas interminables. Es como un anciano sabio sentado en un banco del parque, esperando que est√© listo para escuchar. A√∫n no estoy listo, pero s√© que est√° ah√≠. Eso en s√≠ mismo es un consuelo.',
                user: { name: 'Paula Rodr√≠guez', avatar: 'https://i.pravatar.cc/150?img=72', trust_badge: 'üìñ Bibli√≥filo Truequero' }
            },
            {
                id: 19,
                title: 'R√©quiem',
                author: 'Tatiana Tiba',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg',
                why_release: 'Estos versos son como fragmentos de vidrio delicados, hermosos y afilados. Despu√©s de experimentar una p√©rdida importante, un amigo me envi√≥ este poemario. No encontr√© consuelo, pero encontr√© resonancia: resulta que el dolor extremo puede forjarse con tanta forma, el dolor puede no ser un charco de lodo, sino una escultura de hielo con bordes definidos. No me cur√≥, pero me hizo respetar mi dolor.',
                user: { name: 'Ricardo Silva', avatar: 'https://i.pravatar.cc/150?img=75', trust_badge: 'üåµ Lector Novato' }
            },
            {
                id: 20,
                title: 'En el tiempo de las mariposas',
                author: 'Julia √Ålvarez',
                cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg',
                why_release: 'Como alguien que oscila entre dos culturas, este libro es mi "idioma". Esa peque√±a grieta que se produce al cambiar entre ingl√©s y espa√±ol, esa sensaci√≥n de que la definici√≥n de "hogar" siempre est√° borrosa, est√° precisamente capturada. Me hizo saber que mi confusi√≥n no es un defecto personal, sino una situaci√≥n com√∫n de una generaci√≥n. Leerlo es como reconocer a los de mi especie en el borde del mundo.',
                user: { name: 'Sandra M√©ndez', avatar: 'https://i.pravatar.cc/150?img=80', trust_badge: 'ü¶â Compa√±ero Confiable' }
            }
        ];

        // ÊàëÁöÑÂõæ‰π¶ÔºàÁî®‰∫é‰∫§Êç¢Ôºâ
        const myBooks = [
            { id: 1, title: 'La casa de los esp√≠ritus', cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg' },
            { id: 2, title: 'Rayuela', cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg' },
            { id: 3, title: 'El amor en los tiempos del c√≥lera', cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg' },
            { id: 4, title: 'La tregua', cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg' }
        ];

        // ÂéÜÂè≤‰∫§Êç¢ËÆ∞ÂΩï
        const exchanges = [
            {
                book1: { title: 'Cien a√±os de soledad', cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg', user: 'Mar√≠a' },
                book2: { title: 'La casa de los esp√≠ritus', cover: 'https://images-na.ssl-images-amazon.com/images/I/71QKQ9KJZJL.jpg', user: 'Luis' },
                date: '15 Ene 2024'
            },
            {
                book1: { title: 'Pedro P√°ramo', cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg', user: 'Carlos' },
                book2: { title: 'Rayuela', cover: 'https://images-na.ssl-images-amazon.com/images/I/81Y5Z8KJZJL.jpg', user: 'Sof√≠a' },
                date: '20 Ene 2024'
            },
            {
                book1: { title: 'Del amor y otros demonios', cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg', user: 'Ana' },
                book2: { title: 'El amor en los tiempos del c√≥lera', cover: 'https://images-na.ssl-images-amazon.com/images/I/81dQwQlmAXL.jpg', user: 'Diego' },
                date: '25 Ene 2024'
            }
        ];

        let currentBookIndex = 0;
        let selectedBookId = null;

        // ÂàùÂßãÂåñ
        function init() {
            displayBook(0);
            displayExchanges();
            updateCounter();
        }

        // ÊòæÁ§∫ÂΩìÂâçÂõæ‰π¶
        function displayBook(index) {
            if (index < 0 || index >= books.length) return;
            currentBookIndex = index;
            
            const book = books[index];
            const bookDisplay = document.getElementById('bookDisplay');
            
            bookDisplay.innerHTML = `
                <div class="book-card">
                    <div class="book-header">
                        <img src="${book.cover}" alt="${book.title}" class="book-cover">
                        <div class="book-info">
                            <div class="book-title">${book.title}</div>
                            <div class="book-author">por ${book.author}</div>
                            <div class="user-info">
                                <img src="${book.user.avatar}" alt="${book.user.name}" class="user-avatar">
                                <div>
                                    <div class="user-name">${book.user.name}</div>
                                    <span class="trust-badge">${book.user.trust_badge}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="why-release">
                        <h4>Por qu√© lo suelto</h4>
                        <p>${book.why_release}</p>
                    </div>
                </div>
            `;

            updateCounter();
            updateNavButtons();
        }

        // Êõ¥Êñ∞ËÆ°Êï∞Âô®
        function updateCounter() {
            document.getElementById('currentIndex').textContent = currentBookIndex + 1;
            document.getElementById('totalBooks').textContent = books.length;
        }

        // Êõ¥Êñ∞ÂØºËà™ÊåâÈíÆ
        function updateNavButtons() {
            document.getElementById('prevBtn').disabled = currentBookIndex === 0;
            document.getElementById('nextBtn').disabled = currentBookIndex === books.length - 1;
        }

        // ‰∏ä‰∏ÄÊú¨
        function prevBook() {
            if (currentBookIndex > 0) {
                displayBook(currentBookIndex - 1);
            }
        }

        // ‰∏ã‰∏ÄÊú¨
        function nextBook() {
            if (currentBookIndex < books.length - 1) {
                displayBook(currentBookIndex + 1);
            }
        }

        // ÊòæÁ§∫‰∫§Êç¢ËÆ∞ÂΩï
        function displayExchanges() {
            const exchangeList = document.getElementById('exchangeList');
            
            if (exchanges.length === 0) {
                exchangeList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ü§ù</div>
                        <p>A√∫n no hay intercambios</p>
                    </div>
                `;
                return;
            }

            exchangeList.innerHTML = exchanges.map(exchange => `
                <div class="exchange-item">
                    <div class="exchange-book">
                        <img src="${exchange.book1.cover}" alt="${exchange.book1.title}">
                        <p>${exchange.book1.title}</p>
                        <p style="font-size: 10px; color: #6D4C41;">${exchange.book1.user}</p>
                    </div>
                    <div class="exchange-icon">ü§ù</div>
                    <div class="exchange-book">
                        <img src="${exchange.book2.cover}" alt="${exchange.book2.title}">
                        <p>${exchange.book2.title}</p>
                        <p style="font-size: 10px; color: #6D4C41;">${exchange.book2.user}</p>
                    </div>
                </div>
                <div class="exchange-date">${exchange.date}</div>
            `).join('');
        }

        // ÊâìÂºÄÊ®°ÊÄÅÊ°Ü
        function openModal() {
            const modal = document.getElementById('exchangeModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // ÊòæÁ§∫ÊàëÁöÑÂõæ‰π¶
            displayMyBooks();
            
            // ÈáçÁΩÆË°®Âçï
            document.getElementById('userStory').value = '';
            selectedBookId = null;
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('submitBtn').disabled = false;
        }

        // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
        function closeModal() {
            const modal = document.getElementById('exchangeModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // ÊòæÁ§∫ÊàëÁöÑÂõæ‰π¶
        function displayMyBooks() {
            const selector = document.getElementById('bookSelector');
            selector.innerHTML = myBooks.map(book => `
                <div class="book-option ${selectedBookId === book.id ? 'selected' : ''}" 
                     onclick="selectBook(${book.id})">
                    <img src="${book.cover}" alt="${book.title}">
                    <p>${book.title}</p>
                </div>
            `).join('');
        }

        // ÈÄâÊã©Âõæ‰π¶
        function selectBook(bookId) {
            selectedBookId = bookId;
            displayMyBooks();
        }

        // Êèê‰∫§‰∫§Êç¢Áî≥ËØ∑
        function submitExchange() {
            const story = document.getElementById('userStory').value.trim();
            
            if (!story || story.length < 20) {
                alert('Por favor, escribe al menos 20 palabras en tu historia.');
                return;
            }

            if (!selectedBookId) {
                alert('Por favor, selecciona un libro para intercambiar.');
                return;
            }

            // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
            document.getElementById('successMessage').style.display = 'block';
            document.getElementById('submitBtn').disabled = true;

            // 3ÁßíÂêéÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            setTimeout(() => {
                closeModal();
                document.getElementById('userStory').value = '';
                selectedBookId = null;
                document.getElementById('successMessage').style.display = 'none';
                document.getElementById('submitBtn').disabled = false;
            }, 2000);

            // ËøôÈáåÂèØ‰ª•ÂèëÈÄÅÂà∞ÂêéÁ´Ø
            console.log('Intercambio solicitado:', {
                bookId: books[currentBookIndex].id,
                myBookId: selectedBookId,
                story: story
            });
        }

        // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠
        document.getElementById('exchangeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // ESCÈîÆÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        init();
    </script>
</body>
</html>
